# =========================
# Core service config
# =========================
NODE_ENV=development
PORT=4000
WEB_ORIGIN=http://localhost:3000
DATABASE_URL=postgres://clearcost:clearcost@localhost:5432/clearcost

# Security / secrets
API_KEY_PEPPER=change-me-long-random
INTERNAL_SIGNING_SECRET=
WEBHOOK_KMS_KEY=

# =========================
# Data sources / remotes
# =========================
DATA_REMOTE_BASE=https://data.clearcost.dev
DB_DATA_API_BASE=
HTS_API_BASE=https://hts.usitc.gov/api
UK_10_DATA_API_BASE=https://data.api.trade.gov.uk

# =========================
# FX (ECB primary; optional secondary)
# =========================
CURRENCY_BASE=USD
FX_MAX_AGE_HOURS=72
FX_SECONDARY=
FX_SECONDARY_MAX_LAG_DAYS=3
OXR_APP_ID=

# =========================
# EU TARIC
# =========================
EU_TARIC_LANGUAGE=en
EU_TARIC_GOODS_URL=https://ec.europa.eu/taxation_customs/dds2/taric/consultation.html
EU_TARIC_GOODS_DESC_URL=
EU_TARIC_COMPONENT_URL=
EU_TARIC_MEASURE_URL=
EU_TARIC_GEO_DESC_URL=
# CSV list of measure type IDs representing remedies (trade defense)
EU_TARIC_REMEDY_TYPES=552,551,558

# UK Trade Remedies (optional overrides)
UK_REMEDY_MEASURE_TYPES=552,551,558

# =========================
# US surcharges (env overrides)
# =========================
US_MPF_PCT=0.003464
US_MPF_MIN=27.75
US_MPF_MAX=538.40
US_MPF_EFFECTIVE=2024-01-01
US_MPF_NOTES="Manual override via env"
US_HMF_PCT=0.00125
US_HMF_EFFECTIVE=2024-01-01
US_HMF_NOTES="Manual override via env"

HTS_JSON_URL=https://www.usitc.gov/sites/default/files/tata/hts/hts_2025_revision_19_json.json
HTS_CSV_URL=https://www.usitc.gov/sites/default/files/tata/hts/hts_2025_revision_16_csv.csv

# =========================
# Webhooks
# =========================
CLEARCOST_WEBHOOK_TIMEOUT_MS=5000

# =========================
# Import runtime / metrics
# =========================
IMPORT_STALE_MINUTES=30
IMPORT_AGE_BUCKETS=60,300,900,3600

# =========================
# Rate limiting
# =========================
RATE_LIMIT_MAX=600
RATE_LIMIT_WINDOW="1 minute"

# =========================
# Tasks / cron
# =========================
CLEARCOST_TASKS_API_KEY=tasks:imports:sweep-stale,tasks:fx:daily,tasks:vat:auto,tasks:duties:uk-mfn,tasks:duties:uk-fta,tasks:duties:eu-mfn,tasks:duties:eu-fta,tasks:duties:us-mfn,tasks:duties:us-fta,tasks:surcharges:us-trade-remedies,tasks:surcharges:us-all,tasks:surcharges:json,tasks:freight:json,tasks:hs:eu-hs6,tasks:hs:ahtn,tasks:duties:wits,tasks:duties:wits:asean,tasks:duties:wits:japan,tasks:surcharges:eu-remedies,tasks:surcharges:uk-remedies,tasks:de-minimis:import-zonos,tasks:de-minimis:import-official,tasks:imports:prune

# =========================
# Billing (Stripe)
# =========================
STRIPE_SECRET_KEY=sk_live_or_test_...
STRIPE_WEBHOOK_SECRET=whsec_...
STRIPE_PRICE_STARTER=price_...
STRIPE_PRICE_GROWTH=price_...
STRIPE_PRICE_SCALE=price_...

# =========================
# Plan entitlements (optional overrides)
# =========================
CC_LIMIT_FREE_MAX_MANIFESTS=1
CC_LIMIT_FREE_MAX_ITEMS_PER_MANIFEST=100
CC_LIMIT_STARTER_MAX_MANIFESTS=10
CC_LIMIT_STARTER_MAX_ITEMS_PER_MANIFEST=5000

# =========================
# Optional sources
# =========================
AHTN_CSV_URL=

# =========================
# CI / deploy metadata (optional; set by CI)
# =========================
COMMIT_SHA=
VERCEL_GIT_COMMIT_SHA=

# =========================
# Notifications (optional)
# =========================
SLACK_WEBHOOK_URL=
SLACK_BOT_TOKEN=
SLACK_CHANNEL_ID=
DISCORD_WEBHOOK_URL=
